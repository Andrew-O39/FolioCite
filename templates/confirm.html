{% extends "base.html" %}
{% block content %}
<div class="container">
  <h1>Confirm {{ 'book' if entry_type == 'book' else 'article' }} details</h1>
  <p class="subtitle">
    Check and edit the metadata below if needed. FolioCite will use this
    information to build your citation.
  </p>

  <p class="note">
    These details were fetched automatically from an external database and may be
    incomplete or slightly inaccurate (especially publisher, place, and year).
    Please adjust them before you use the citation in your thesis.
  </p>

  <form action="/cite" method="post" class="card">

    {% if cover_url %}
      <div style="max-width: 220px; margin-bottom: 1rem;">
        <img src="{{ cover_url }}" alt="Cover for {{ title }}" style="width: 100%; border-radius: 8px;">
      </div>
    {% endif %}

    <input type="hidden" name="entry_type" value="{{ entry_type }}">

    <label for="title">Title</label>
    <input
      type="text"
      id="title"
      name="title"
      value="{{ title }}"
      required
    >

    <label for="authors">Authors (separate with semicolon “;”)</label>
    <input
      type="text"
      id="authors"
      name="authors"
      value="{{ authors }}"
    >

    <label for="year">Year</label>
    <input
      type="text"
      id="year"
      name="year"
      value="{{ year }}"
      placeholder="e.g. 2011"
    >

    {% if entry_type == "book" %}
      <label for="publisher">Publisher</label>
      <input
        type="text"
        id="publisher"
        name="publisher"
        value="{{ publisher }}"
        placeholder="e.g. Farrar, Straus and Giroux"
      >

      <label for="place">Place of publication</label>
      <input
        type="text"
        id="place"
        name="place"
        value="{{ place }}"
        placeholder="e.g. London"
      >
    {% else %}
      <label for="journal">Journal</label>
      <input
        type="text"
        id="journal"
        name="journal"
        value="{{ journal }}"
        placeholder="e.g. Journal of XYZ"
      >

      <label for="volume">Volume</label>
      <input
        type="text"
        id="volume"
        name="volume"
        value="{{ volume }}"
      >

      <label for="issue">Issue</label>
      <input
        type="text"
        id="issue"
        name="issue"
        value="{{ issue }}"
      >

      <label for="pages">Pages</label>
      <input
        type="text"
        id="pages"
        name="pages"
        value="{{ pages }}"
        placeholder="e.g. 123–145"
      >

      <label for="doi">DOI</label>
      <input
        type="text"
        id="doi"
        name="doi"
        value="{{ doi }}"
        placeholder="e.g. 10.1000/xyz123"
      >
    {% endif %}

    {# These must be outside the if/else so both books and articles send them #}
    <input type="hidden" name="style" value="{{ style }}">
    <input type="hidden" name="cover_url" value="{{ cover_url or '' }}">

    <button type="submit">Generate citation</button>
  </form>

  <a href="/" class="back-link">&larr; Start over</a>
</div>
{% endblock %}